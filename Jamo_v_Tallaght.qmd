---
title: "Dublin Midlands WaW Viewer"
format: 
  dashboard:
    theme: 
      - sketchy
      - custom.scss
    logo: images/clock-history.svg
editor_options: 
  chunk_output_type: inline
---

```{r}
library(plotly)
library(DT)
source("getData.R")
```


# Outpatients

## Column - Graph WaW {height = "60%"}

```{r}
#| title: Outpaitent's Weighted Average Wait Time Since 2022

plot_ly(Hospital_WaW, x = ~report_date, y = ~WaW, color = ~`hospital name`, type = 'scatter', mode = 'lines+markers') %>% 
    layout(
    xaxis = list(title = "Week Ending", showgrid = FALSE),
    yaxis = list(title = "Weighted Average Wait Time", griddash = 'dot'),
    plot_bgcolor = 'rgba(255, 255, 255, 0.5)', # 50% transparent white
    paper_bgcolor = 'rgba(255, 255, 255, 0.5)' # 50% transparent white
  )


```

## Column - WaW Tables {height="40%"}

### Row - Hospital WaW Table {width="25%"}
```{r}
#| title: Current WaW by Hospital

# Create the table
current_hospital_WaW %>% 
  select(-report_date) %>% 
  rename(Hospital = `hospital name`) %>% 
datatable(
          options = list(
            paging = FALSE,       # Disable paging
            searching = FALSE,    # Disable search box
            columnDefs = list(
              list(targets = 0, width = '200px'),  # Adjust width of hospital name column
              list(targets = 1, width = '100px')   # Adjust width of WaW column
            )
          )
            ,rownames = FALSE)

```

### Row - Specialty WaW Table {width="25%"}

```{r}
#| title: Current WaW by Speaciality

# Create the table
current_speciality_WaW %>% 
  select(-report_date) %>% 
datatable(
          options = list(
            paging = FALSE,       # Disable paging
            searching = FALSE,    # Disable search box
            columnDefs = list(
              list(targets = 0, width = '200px'),  # Adjust width of hospital name column
              list(targets = 1, width = '100px')   # Adjust width of WaW column
            )
          )
            ,rownames = FALSE)
```


### Row - Hospital Speciality Table {width="50%"}
```{r}
#| title: Current WaW by Hospital, Specialty

pivot_data <- Spec_Hos_WaW %>%
  pivot_wider(names_from = Specialty, values_from = WaW) %>% 
  rename(Hospital = `hospital name`)

datatable(
  pivot_data,
  extensions = 'Buttons', # Enable Buttons extension
  options = list(
    dom = 'Bfrtip', # Add buttons to the top of the table
    buttons = c('excel', 'pdf', 'print'), # Available buttons
    paging = FALSE,
    searching = FALSE
  ),
  rownames = FALSE
)

```

# Inpatients/Day Cases

# GI Scopes
